title          = Web server log file analysis
page_title     = Web server log file analysis

<h2>Web server log file analysis</h2>
<p>
Date: 2004.09.30
</p>
<p>
After a long time of neglecting the issue, today (2004.09.30) I finally setup
web log analyser called <a href="http://awstats.sourceforge.net/">awstats</a>
on some of the sites I am maintaining. I started with my own site 
<a href="http://www.szabgab.com/">szabgab.com</a> with obviously 
very low expectations regarding the number of visitors. After all I launched
the site only a few weeks ago and it does not have a lot of content yet.
</p>
<p>
Indeed there was only a handful of page-views on the site. I happily noticed that a 
number of search engines have already looked at the site so I can expect my site to be
indexed. Actually I noticed a few days ago that searching on Google for 
<a href="http://www.google.com/search?q=gabor+szabo">Gabor Szabo</a> already shows 
this site as the third result and <a href="http://www.pti.co.il/">Perl Training Israel</a>
being the fourth.
</p>
<p>
Among the few page views obviously my own visits checking how the site functions make a relatively
large part but even with this small sample I can notice some interesting thing. While the percentage
of hits from Windows machines is 41.1% only 21.2% of the hits are generated by Internet Explorer.
That is, among my visitors <b>half of them use alternative browsers even on Windows</b>.
</p>
<h2>perl.org.il</h2>
<p>
Next I ran the analyser on the web site of the <a href="http://www.perl.org.il/">Israeli Perl Mongers</a>.
</p>
<p>
The first thing I noticed that the single biggest visitor generated 9132 page views, <b>15 times more !</b>
than the second one. As the hostname of that visitor is p4225-ipad05fukuhanazo.fukushima.ocn.ne.jp somewhere
in Japan, it seems to be obvious that it is doing something bad to the site. I quickly Denied access from 
this address. 
</p>
<p>
The next thing to notice was that <a href="http://www.google.com/">Google</a> hit the site 137,351 time in September 2004 using 600 Mb of data
transfer. This is 3 times more in terms of bandwidth than the total data transfer of all the visitors in
this period. This does not seem right either. 
</p>
<p>Looking at the list of <b>Operating Systems</b> generating hits. Actually why hits ? I think I'd be much more interested
in the <b>distribution of the visitors</b> and not the hits. Anyway we get that 
</p>
<ol>
 <li> Windows 71.2 %</li>
 <li> Linux 16.8 %</li>
 <li> Unknown 7.8 % - Where does this come from ?</li>
 <li> FreeBSD 1.7 %</li>
 <li> Macintosh 1.6 %</li>
 <li> ...</li>
</ol>
<p>
This is only slightly surprising as among the Perl programmers there are a lot more people using non-MS Operating
Systems than in the general public. Still having only 71% seems very low. Looking at the 
<b>Browsers</b> gave me a bigger surprise:
</p>
<ol>
 <li> MS Internet Explorer 57.1 %</li>
 <li> FireFox 15 %</li>
 <li> Mozilla 11 %</li>
 <li> Unknown 4.7 %  - Where does this come from ?</li>
 <li> Opera 3.4 %</li>
 <li> Konqueror 3.1 %</li>
 <li> Netscape 1.6%</li>
 <li> ...</li>
</ol>
<p>
OK, so from the previous numbers we could already guess that IE could not generate more than
71.2 % of the hits but how come it is only 57.1 % ? This means that a relative large part of
the visitors while still using Windows have already moved away from Internet Explorer and are
using one of the <b>Open Source browsers</b>.
</p>

<h2>So where are these visitors coming from ?</h2>
<p>
An enormous number, some 32 % of the visitors came from Search engines. Among them Google was the
clear winner, bringing 30% (or 9407) of our total visitors. So we might as well forgive the Google 
robots for eating so much of our bandwidth. Among the individual referrer sites 
<a href="http://www.yapc.org/">YAPC.org</a> leads the pack, immediately followed by a number of 
<b>porn sites !</b> I don't understand this one. I am sure, even without looking at their content
that these are such sites and that they don't have a link to <a href="http://www.perl.org.il/">perl.org.il</a>.
So why are they listed as the referrer ? Looking at the real log files all these entries are generated
by a <i>Mozilla/5.0 (compatible; Konqueror/2.2.2; Linux 2.2.19;</i> running on a single host. They all
fetch the main page of the site. The only thing I can come up with is that by artificially injecting 
this address into our log file in a large number, the site owners want to make us get curious and visit
theirs. Sounds very lame.
</p>

<h2>Perl Training Israel</h2>
<p>The next site to look at was the site of my <a href="http://www.pti.co.il/">Perl Training Company</a>.
There were no big surprises here but as I found out there are a number of bad pages on the site giving
404 errors. Now, using this statistics and the error.log I'll get to clean up the site and see what to
do with the randomly failing visitors who try to reach pages that never existed.
</p>

<h2>H24, a commercial site</h2>
<p>
Looking at similar statistics at <a href="http://www.h24.co.il/">H24</a> - one of my clients - show a 
totally different picture. On their site <b>Windows is 99.4 %</b> and <b>Internet Explorer is 99.1 %</b>.
</p>
<p>
This isn't surprising either. First of all they cater for the general public and are mostly advertising on
news/fun sites. Besides, part of the site currently works with IE only. We are working on fixing this but
I expect some difficulties convincing them. They can look at their own statistics and say: For less than 1% 
we should not invest anything.
</p>

<h2>MSNBot vs Google</h2>
<p>
I read about some <a href="http://lxer.com/module/newswire/view/23328/index.html">possible conspiracy theory</a> 
regarding the many hits MSNBot generates in order to change the way how search results about Linux show up.
Having these statistics it seems that the MSNBot is just plain greedy. On the H24 site, in the 
last couple of days we got about 2500 hits from MSNBot while only 340 from Googlebot. And it is definitely
not a pro-Linux site.
</p>

<h2>Other web statistics</h2>
<p>
Knowing that Perl programmers use free Operating Systems and Browsers more than the average wasn't a 
surprise, though the rate was interesting. Anyway I decided, this is a good time to look at
similar information from other sources. The first hit on Google lead me to the 
<a href="http://www.w3schools.com/browsers/browsers_stats.asp">browser stats of w3schools</a>.
<br />
According to their statistics, those on our Perl related site are not that much off the general 
numbers. <br />
</p>
<b>Operating Systems</b>
<ol>
 <li>Windows: 90.2 %</li>
 <li>Linux: 3.1 %</li>
 <li>Macintosh: 2.6 %</li>
</ol>
<b>Browsers</b>
<ol>
 <li> Internet Explorer (5+6): 75.8%</li>
 <li> Mozilla: 16.9 %</li>
 <li> Opera: 2.3 %</li>
 <li> Netscape (3+4+7): 1.7%</li>
</ol>
(data from September 2004)<br />

Here too we can see interesting things:
<ol>
 <li> About 15% of the users use Windows but not Internet Explorer</li>
 <li> Windows usage is much lower than reported earlier</li>
</ol>
<p>
While the only analysis the above site provides is saying that Windows XP and IE 6 are
the leading OS and Browser. What they fail to mention but can be seen from their data is
the trend. A year earlier in September 2003 IE (5+6) had a market share of 86.6% while 
the various versions of Windows had 92.6 %. Both are declining.
</p>
